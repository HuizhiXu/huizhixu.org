---
title: "2024-04-14 让AI村民组成虚拟村庄会发生什么事"
date: 2024-04-14T19:01:50+08:00  
tags: ["tech","llm"]
format: hugo-md
jupyter: nn3.10
math: true
isCJKLanguage: true
# thumbnail: https://picsum.photos/id/316/400/250
---

去年Agent很火的时候，就知道有斯坦福出的这个虚拟小镇的论文了，当时大家都很好奇，怎么能够让大语言模型来操纵agent做出非常复杂的行为呢？

事实上，该系统是基于规则的一种变体。
小镇里有各种各样的角色人物，它预先设定了各个角色人物一天的行程安排。每个角色都有自己明确的人物设定和说明。例如，医生一天的工作包括在诊所为患者诊治，整理药品,以及进食、休息等日常作息。如果角色被固定下来，那么他们一天的日程安排也就相对固定了。

之后，角色人物根据既定规划采取相应的行动。角色人物需依据规划进行下一步行动，该行动可视为状态的转变。

角色人物如何模拟当前情景？他们通过观察来进行。构建一个观察场景，其中包含观察者和被观察者。例如，在没有事件发生的情况下，医生作为观察者，而房间作为被观察者，医生的状态保持不变，即处于等待患者的状态。医生会定期执行观察动作。一旦患者到来，医生的状态便从“等待”转变为“看病”。患者的到来对医生的状态产生影响，这就是角色人物通过大型语言模型对外界行为做出反应。

角色人物如何知晓应做出何种反应？每当有物品出现在角色旁边，便会触发观察操作。角色人物会提出两个问题：第一，该物品与角色之间的关系是什么？第二，角色将对该物品采取何种行动？角色人物会持续提出这两个问题，而大语言模型则依据角色设定进行回答。

角色人物的日常生活往往是单调的，因为他们的行为模式是预先设定好的。为了打破这种单调，需要外部刺激，例如有人举办活动或参加聚会，这些活动会引发角色人物的后续反应。

如何改变角色人物的状态，进而改变其设定或生活？这需要通过反思（reflect）来实现。反思是对记忆的回顾，能够提炼出真正重要的内容。何时进行反思？当近期发生了许多重要事件时，这段记忆就显得尤为重要。如何评判事件的重要性？这由GPT来决定。反思的内容是什么？GPT会根据最近发生的事情，为机器生成三个问题，并引导机器检索记忆并作出回答。

为什么说这个小镇是基于规则的变体？人物设定带来的routine基本上是确定的，大语言模型能带来一些在语言上的小的改变，以及大语言模型本身作为一个决策器，去判断下一步的交互。

小镇网址： https://reverie.herokuapp.com/arXiv_Demo/
